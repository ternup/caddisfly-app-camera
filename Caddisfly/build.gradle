/*
 * Copyright (C) TernUp Research Labs
 *
 * This file is part of Caddisfly
 *
 * Caddisfly is free software: you can redistribute it and modify it under the terms of
 * the GNU Affero General Public License (AGPL) as published by the Free Software Foundation,
 * either version 3 of the License or any later version.
 *
 * Caddisfly is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Affero General Public License included below for more details.
 *
 * The full license text can also be seen at <http://www.gnu.org/licenses/agpl.html>.
 */

apply plugin: 'com.android.application'

android {
    compileSdkVersion 19
    buildToolsVersion '19.1.0'

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 19
        useOldManifestMerger true
        testApplicationId "com.ternup.caddisfly.test"
        testInstrumentationRunner "com.ternup.caddisfly.test.TestRunner"
    }

    signingConfigs {
        release
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            runProguard true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
            zipAlign true
        }
    }

    productFlavors {
        internalFlavor {
            applicationId "com.ternup.caddisfly"
            versionName "prototype 0.28 alpha"
            versionCode 28
        }
        externalFlavor {
            applicationId "org.akvo.mobile.caddisfly"
            versionName "prototype 0.28 alpha"
            versionCode 28
        }
    }

    lintOptions {
        abortOnError false
        absolutePaths false
    }
}

dependencies {
    internalFlavorCompile files('libs/android-async-http-1.4.5.jar')
    internalFlavorCompile 'com.google.android.gms:play-services:4.4.52'
    internalFlavorCompile 'com.android.support:support-v13:19.1.0'
    androidTestCompile 'com.jayway.android.robotium:robotium-solo:5+'
}

def props = new Properties()
props.load(new FileInputStream(rootProject.file("release.properties")))
android.signingConfigs.release.storeFile rootProject.file(props.keyStore)
android.signingConfigs.release.storePassword props.keyStorePassword
android.signingConfigs.release.keyAlias props.keyAlias
android.signingConfigs.release.keyPassword props.keyAliasPassword